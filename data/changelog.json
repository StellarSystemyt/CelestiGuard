[

  {
    "version":"0.0.4.9",
    "date":"2025-11-18",
    "changes":[
      "Fixed invalid/expired code handling and improved error responses for token exchange failures.",
      "Ensured redirect_uri and client credentials are validated with clearer hints when misconfigured.",
      "Prevented /auth/login from calling Discord again if the user is already logged in, reducing rate-limit spam and avoiding redirect loops.",
      "Restored the dashboard routes after previous refactors so the web UI is fully usable again.",
      "Updated the root dashboard (/) so logged-in users see a grid of the bot’s guilds with name, ID, and member count, each linking to /guild/{id}.",
      "Kept per-guild pages hard-protected with OAuth + “must be a member” checks to prevent unauthorized access.",
      "Made the status page more dynamic: it periodically refreshes /api/status, showing Discord connection state, database health, dashboard host/port, CurseForge monitor status, and last check timestamps.",
      "Added clearer labels for “Up / Issue / Enabled / Disabled” and cleaned up the layout for better at-a-glance reading.",
      "Adjusted SessionMiddleware configuration and https_only handling so the dashboard works correctly behind a real HTTPS reverse proxy without breaking local/dev setups.",
      "Squashed a regression where https_only was briefly set incorrectly, causing issues for non-HTTPS local testing.",
      "Added a favicon for the web dashboard.",
      "Minor style and layout tweaks to keep the modern dark/light theming consistent across pages."
    ]
  },
  {
    "version": "0.0.4.8",
    "date": "2025-11-12",
    "changes": [
      "Dashboard: made template/static paths absolute for reliable AWS/systemd runs.",
      "Fixed fallback HTML f-string escaping in inline changelog renderer.",
      "Added Discord OAuth routes with one-time state + 303 callback to prevent login loops.",
      "Added favicon/robots endpoints to reduce noisy 404s.",
      "Exchange code once with httpx; handle rate limits (Retry-After/backoff)",
      "Cache used codes and enforce one-time state, return 303 to avoid loops",
      "Keep SameSite 'lax' casing correct and maintain existing dashboard routes",
      "Auth: guard /auth/login when session exists; prevent repeated OAuth starts.",
      "Auth: keep one-time state and code dedupe to stop callback loops and token rate limits.",
      "Debug: add /debug/session and X-Debug headers to verify cookies.",
      "Auth: persistent OAuth dedupe via SQLite to prevent multi-worker token floods.",
      "Auth: login guard and idempotent callback with 303 redirect to stop loops.",
      "Debug: /debug/session and debug headers to verify cookie and flow."
    ]
  },
  {
  "version": "0.0.4.8",
  "date": "2025-11-11",
  "changes": [
    "Renamed 'target_id' → 'user_id' in moderation actions (ban, mute, etc.)",
    "Fixes Pylance errors for missing or mismatched parameters",
    "Ensures DB logging uses consistent user_id field for target users",
    "Made template and static directory paths absolute using BASE_DIR to ensure FastAPI finds resources when running under systemd/AWS environments",
    "Escaped nested f-string braces in fallback HTML to fix Pylance syntax errors",
    "Verified index.html and static assets render correctly on production",
    "Resolved Pylance type error in `add_case` by ensuring `latrowid` always returns an integer.",
    "Added a fallback query to guarentee a valid case ID is returned even if SQLite returns `None`.",
    "Resolved 502 Bad Gateway errors during Discord OAuth login caused by upstream header limits.",
    "Updated Nginx reverse proxy configuration to increase buffer sizes for large authorization headers.",
    "Verified successful callback and login redirect for CelestiGuard Dashboard."
  ]
  },
  {

  "version": "0.0.4.7",
  "date": "2025-11-02",
  "changes": [
    "Hardened Discord OAuth: fail fast on bad env config, enforce CSRF state, clearer token exchange errors.",
    "Added optional ?debug=1 on /auth/callback to surface Discord error payloads for troubleshooting."
  ]
  },
  {
    "version":"0.0.4.7",
    "date":"2025-11-02",
    "changes": [
      "OAuth: Removed prompt=none to fix “Invalid Form Body” on mobile / in-app browsers.",
      "Security: Added CSRF state generation and verification for the Discord OAuth flow.",
      "UX: New /auth/start interstitial to help users open the flow in their system browser if Discord's in-app webview misbehaves.",
      "Reliability: Callback now returns clearer JSON on token/userinfo failures and disables caching for error responses."
    ]
  },
  {
  "version": "0.0.4.6",
  "date": "2025-11-01",
  "changes": [
    "Switched dashboard auth from token-based links to Discord OAuth sessions.",
    "Dashboard and guild settings now require login and guild membership.",
    "Changelog and Status pages are public: /changelog, /status (+ /api/*).",
    "Fixed dependency issue by replacing lambda Depends with `_member_dep`.",
    "Improved status snapshot robustness for CurseForge last-check timestamp."
  ],
  "notes": [
    "BREAKING: Remove token auth. Set SESSION_SECRET, OAUTH_CLIENT_ID, OAUTH_CLIENT_SECRET, OAUTH_REDIRECT_URI."
  ]
  },
  {
    "version": "0.0.4.5",
    "date": "2025-10-31",
    "changes": [
      "Fixed dashboard load error caused by unescaped braces in changelog template",
      "Removed unsupported audioop-lts dependency to ensure compatibility with Python 3.12",
      "Improved deployment stability and logging clarity on EC2",
      "Refined internal redeploy script for safer updates"
    ]
  },
  {
    "version": "0.0.4.4",
    "date": "2025-10-26",
    "changes": [
      "Initial CurseForge updates cog integration",
      "Minor UI adjustments on dashboard"
    ]
  },
  {
    "version": "0.0.4.4",
    "date": "2025-10-25",
    "changes": [
      "Changelog API and UI added",
      "Dashboard theme + avatar polish",
      "Counting fixes for scientific notation and unicode digits"
    ]
  },
  {
    "version": "0.0.4.3",
    "date": "2025-10-24",
    "changes": [
      "Initial CelestiGuard release",
      "Counting cog + dashboard",
      "Cloudflare-free AWS deploy with Nginx + Certbot"
    ]
  }
]
